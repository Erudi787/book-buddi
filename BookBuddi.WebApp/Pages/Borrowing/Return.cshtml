@page
@model BookBuddi.Pages.Borrowing.ReturnModel
@{
    ViewData["Title"] = "Return Book";
}

<h1>Return Book</h1>

@if (Model.Transaction != null)
{
    <p>Are you sure you want to return this book?</p>

    <dl>
        <dt>Book</dt>
        <dd>@Model.BookTitle</dd>

        <dt>Member</dt>
        <dd>@Model.MemberName</dd>

        <dt>Borrow Date</dt>
        <dd>@Model.Transaction.BorrowDate.ToString("yyyy-MM-dd")</dd>

        <dt>Due Date</dt>
        <dd>@Model.Transaction.DueDate.ToString("yyyy-MM-dd")</dd>

        <dt>Status</dt>
        <dd>@Model.Transaction.Status</dd>

        @if (Model.Transaction.DueDate < DateTime.Now)
        {
            <dt style="color: red;">Days Overdue</dt>
            <dd style="color: red;">@((DateTime.Now - Model.Transaction.DueDate).Days) days</dd>
        }
    </dl>

    <form method="post">
        <input type="hidden" name="id" value="@Model.Transaction.TransactionId" />
        <button type="submit">Return Book</button>
        <a href="/Borrowing/Index">Cancel</a>
    </form>

    @if (!string.IsNullOrEmpty(Model.ErrorMessage))
    {
        <p style="color: red;">@Model.ErrorMessage</p>
    }
}
